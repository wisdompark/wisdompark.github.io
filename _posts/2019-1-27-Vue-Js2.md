---
layout: post
title: 화면을 개발하기 위한 필수 단위
---
## ◾뷰 인스턴스  
뷰 인스턴스는 뷰로 화면을 개발하기 위해 필수적으로 생성해야 하는 기본 단위이다.

### ***뷰 인스턴스의 정의와 속성***

#### #생성자  
객체를 새로 생성 할 때 자주 사용하는 옵션과 기능들을 미리 특정 객체에 저장해 놓고 새로 객체를 생성할 때 기존에 포함된 기능과 더불어 기존 기능을 쉽게 확장하여 사용하는 기법  

new Vue() 인스턴스를 생성할 때 Vue를 생성자라고 한다. Vue 생성자는 뷰 라이브러리를 로딩하면 접근할 수 있으며, 생성자를 사용하면 뷰로 개발할 때 필요한 기능들을 생성자에 미리 정의해 놓고 사용자가 그 기능을 재정의하여 편리하게 사용 가능하다.
```java  
new Vue(){  //Vue 인스턴스 생성
  el : '#app',  //el 속성
  data :{ //data 속성
    message : 'Hello Vue.js!'
  }
}
```

### ***뷰 인스턴스의 옵션과 속성***
인스턴스 생성을 재 정의할 data, el, template, method, created 등의 속성을 의미한다.  
1. template : 화면에 표시할 HTML, CSS 등의 마크업 요소를 정의  
2. methods : 화면 로직 제어와 관계 된 마우스 이벤트 클릭 처리와 같은 메서드를 정의하는 속성  
3. created : 뷰 인스턴스가 생성되자 마자 실행할 로직을 정의할 수 있는 속성  

### ***뷰 인스턴스의 라이프사이클***  
1. beforeCreate : 인스턴스가 생성되고 나서 가장 처음으로 실행되는 라이프 사이클 단계    
2. created :   data 속성과 methods 속성에 접근 할 수 있는 단계이자 컴포넌트가 생성되고 나서 실행되는 단계   
3. mounted : el 속성에서 지정한 화면 요소에 인스턴스가 부착되고 나서 호출되는 단계    
4. beforeUpdate :   관찰하고 있는 데이터가 변경되면 가상 돔으로 화면을 다시 그리기 전에 호출되는 단계    
5. updated : 데이터가 변경되고 나서 가상돔으로 화면을 그리고 나면 실행되는 단계    
6. beforeDestroy : 뷰 인스턴스가 파괴되기 직전에 호출되는 단계  

![_config.yml]({{site.baseurl}}/images/vue_인스턴스_라이프_사이클.jpg )  

## ◾뷰 컴포넌트  
화면을 구성할 수 있는 특정 영역을 의미한다.  
### ***컴포넌트 등록하기***  
1. 전역 컴포넌트  
```java
Vue.component('컴포넌트 이름', {
  //컴포넌트 내용
});
```     
2. 지역 컴포넌트  
```java
new Vue({  
  components: {
    '컴포넌트 이름' : 컴포넌트 내용
  }
});
```

### *지역 컴포넌트와 전역 컴포넌트의 차이*
인스턴스의 유효범위에 있다.

## ◾뷰 컴포넌트 통신
각 컴포넌트의 유효범위가 독립적이기 때문에 다른 컴포넌트의 값을 직접 참조하지 못한다.

### *상하위 컴포넌트 관계*
1. 뷰는 상위에서 하위로만 데이터를 전달해야 하는 기본적인 통신 규칙을 따른다.
2. 상위에서 하위로 props라는 특별한 속성을 전달
3. 하위에서 상위로는 이벤트만 전달

### *상위에서 하위 컴포넌트로 데이터 전달하기*
props는 상위에서 하위 컴포넌트로 데이터를 전달할 때 사용하는 속성이다.  
1. props 속성을 사용하려면 하위 컴포넌트의 속성에 정의
```java
Vue.component(
  'child-component',{
    props : ['props 속성 이름']
  }
);
```  
2. 상위 컴포넌트의 HTML 코드에 등록 된 child-component 컴포넌트 태그에 v-bind 속성 추가  

```java
<child-component v-bind:props 속성 이름="상위 컴포넌트의 data 속성"></child-component>
```

### *하위에서 상위 컴포넌트로 데이터 전달하기*
이벤트를 발생시켜(event emit) 상위 컴포넌트에 신호를 보낸다.
1. 이벤트 발생    
```java
this.$emit('이벤트명');
```

2. 이벤트 수신   

```java
<child-component v-on:이벤트명="상위 컴포넌트의 메서드명"></child-component>
```

### *같은 레벨의 컴포넌트 간 통신*
상위-하위 관계를 유지하고 있지 않아도 컴포넌트 간 데이터를 주고받을 수 있는 방법은 이벤트 버스(Event Bus)이다.

#### 이벤트 버스 형식
```java
//이벤트 버스를 위한 추가 인스턴스 1개 생성
var eventBus = new Vue();
//이벤트를 보내는 컴포넌트
methods : {
  메서드명 : function(){
    eventBus.$emit('이벤트명', 데이터);
  }
}
//이벤트를 받는 컴포넌트
methods : {
  created : function(){
    eventBus.$on('이벤트명', function(데이터){
      ...
    });
  }
}
```
보내는 컴포넌트에서는 .$emit()을, 받는 컴포넌트에서는 .$on()을 구현한다.

### *이벤트 버스의 단점*
props 속성을 이용하지 않고도 원하는 컴포넌트 간 직접적 데이터를 전달할 수 있어 편리하지만 컴포넌트가 많아지면 어디서 어디로 보냈는지 관리가 되지 않는 문제 발생한다.


## ◾참고링크  
1. [뷰 인스턴스 라이프사이클 다이어그램 발췌](https://wikidocs.net/17701) - https://wikidocs.net/17701  

## ◾메모장
